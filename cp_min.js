var ColorPicker;!function(t){t.toNumber=function(t){if("#"==t.charAt(0)&&4==t.length)return 1114112*parseInt(t.charAt(1),16)+4352*parseInt(t.charAt(2),16)+17*parseInt(t.charAt(3),16);if("#"==t.charAt(0))return parseInt(t.substr(1),16);const s=t.split(/[^0-9]+/);return 65536*parseInt(s[1],10)+256*parseInt(s[2],10)+parseInt(s[3],10)},t.toString=function(t){return"rgb("+(t>>16)+","+(t>>8&255)+","+(255&t)+")"},t.t=function(t,s,h){const i=Math.min(t,s,h),n=Math.max(t,s,h);if(0==n)return[0,0,0];const o=n-i,e=o/n;if(0==e)return[0,e,n/255];let c=0;return c=t==n?(s-h)/o:s==n?2+(h-t)/o:4+(t-s)/o,(c/=6)<0&&(c+=1),[c,e,n/255]},t.s=function(t,s,h){t*=6;const i=Math.floor(t),n=t-i,o=Math.round(h*(1-s)*255),e=Math.round(h*(1-n*s)*255),c=Math.round(h*(1-(1-n)*s)*255);switch(h=Math.round(255*h),i%6){case 0:return[h,c,o];case 1:return[e,h,o];case 2:return[o,h,c];case 3:return[o,e,h];case 4:return[c,o,h];case 5:return[h,o,e]}return[0,0,0]}}(ColorPicker||(ColorPicker={})),function(t){const s=200,h=10,i=2;t.Picker=class{constructor(n){this.h=document.createElement("div"),this.i=document.createElement("div"),this.o=document.createElement("input"),this.red=document.createElement("input"),this.green=document.createElement("input"),this.blue=document.createElement("input"),this.color=0,this.h.className="picker",this.h.style.top=n.offsetTop+"px",this.h.style.left=n.offsetLeft+"px";const o=document.createElement("canvas");o.width=s,o.height=s,this.h.appendChild(o);const e=document.createElement("div");e.className="controls",this.h.appendChild(e),this.i.className="swatch",e.appendChild(this.i),this.o.type="text",this.o.className="hex",this.o.addEventListener("keyup",()=>{this.update(16777215&parseInt(this.o.value,16),1)}),e.appendChild(this.o);const c=document.createElement("div");c.className="label",c.appendChild(document.createTextNode("R:")),e.appendChild(c),this.red.type="text",this.red.className="channel",this.red.addEventListener("keyup",()=>{this.update((255&parseInt(this.red.value,10))<<16|65535&this.color,2)}),e.appendChild(this.red);const r=document.createElement("div");r.className="label",r.appendChild(document.createTextNode("G:")),e.appendChild(r),this.green.type="text",this.green.className="channel",this.green.addEventListener("keyup",()=>{this.update((255&parseInt(this.green.value,10))<<8|16711935&this.color,4)}),e.appendChild(this.green);const u=document.createElement("div");u.className="label",u.appendChild(document.createTextNode("B:")),e.appendChild(u),this.blue.type="text",this.blue.className="channel",this.blue.addEventListener("keyup",()=>{this.update(255&parseInt(this.blue.value,10)|16776960&this.color,8)}),e.appendChild(this.blue);const a=document.createElement("div");a.className="buttonbox",e.appendChild(a);const m=document.createElement("button");m.appendChild(document.createTextNode("Okay")),m.addEventListener("click",()=>{document.body.removeChild(this.h),this.done(this.color)}),a.appendChild(m);const d=document.createElement("button");d.appendChild(document.createTextNode("Cancel")),d.addEventListener("click",()=>{document.body.removeChild(this.h),this.done(null)}),a.appendChild(d),this.h.appendChild(document.createElement("br")),this.u=new t.m(o,s,h,i),this.u.l(),o.addEventListener("mousedown",t=>(this.u.track(t.offsetX,t.offsetY,t=>{this.update(t,16)}),t.preventDefault(),!1))}async pick(t){return document.body.appendChild(this.h),this.update(t,0),new Promise(t=>{this.done=t})}update(s,h){this.color=s;let i=this.color.toString(16);for(;i.length<6;)i="0"+i;1&h||(this.o.value=i),this.i.style.backgroundColor="#"+i;const n=this.color>>16,o=this.color>>8&255,e=255&this.color;if(2&h||(this.red.value=n.toString(10)),4&h||(this.green.value=o.toString(10)),8&h||(this.blue.value=e.toString(10)),!(16&h)){const[s,h,i]=t.t(n,o,e);this.u.M(s,h,i),this.u.l()}}}}(ColorPicker||(ColorPicker={})),function(t){t.m=class{constructor(s,h,i,n){this.p=0,this.k=0,this.value=0;const o=s.getContext("2d");if(null==o)throw new Error("No canvas support");this.v=o,this.I=h,this.C=i;const e=this.I-2*i-n;this.P=Math.sqrt(e*e/2),this.u=this.v.createImageData(this.I,this.I);let c=0;const r=this.I/2,u=this.I/2-i;for(let s=0;s<this.I;s++){const h=s-this.I/2,i=h*h;for(let s=0;s<this.I;s++){const n=s-this.I/2,o=Math.sqrt(n*n+i);if(o>=u&&o<r){const s=1+Math.atan2(-h,n)/(2*Math.PI),[i,e,a]=t.s(s,1,1);this.u.data[c++]=i,this.u.data[c++]=e,this.u.data[c++]=a,this.u.data[c++]=r-o<1?255*(r-o):o-u<1?255*(o-u):255}else this.u.data[c++]=0,this.u.data[c++]=0,this.u.data[c++]=0,this.u.data[c++]=0}}}M(t,s,h){this.p=t,this.k=s,this.value=h}l(){this.v.putImageData(this.u,0,0);const s=this.v.getImageData(0,0,this.I,this.I),h=Math.round(this.I/2-this.P/2),i=Math.round(this.I/2+this.P/2);for(let n=h;n<i;n++){const o=(n-h)/this.P;let e=n*s.width*4+4*h;for(let n=h;n<i;n++){const i=(n-h)/this.P,[c,r,u]=t.s(this.p,i,1-o);s.data[e++]=c,s.data[e++]=r,s.data[e++]=u,s.data[e++]=255}}const n=this.p*Math.PI*2,o=this.I/2-this.C/2;let e=Math.round(Math.cos(n)*o+this.I/2),c=Math.round(this.I/2-Math.sin(n)*o);this.H(s,e,c),e=Math.round(this.k*this.P+h),c=Math.round((1-this.value)*this.P+h),this.H(s,e,c),this.v.putImageData(s,0,0)}track(t,s,h){const i=Math.round(this.I/2-this.P/2),n=Math.round(this.I/2+this.P/2);t>=i&&t<n&&s>=i&&s<n?this.S(t,s,h):this.V(t,s,h)}V(t,s,h){const i=this.I/2,n=this.I/2-this.C,o=s-this.I/2,e=t-this.I/2,c=Math.sqrt(e*e+o*o);if(c>=n&&c<i){this.p=1+Math.atan2(-o,e)/(2*Math.PI),this.l(),h(this.color());const t=t=>{const s=t.offsetY-this.I/2,i=t.offsetX-this.I/2;return this.p=1+Math.atan2(-s,i)/(2*Math.PI),this.l(),h(this.color()),t.preventDefault(),!1},s=()=>(document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",s),!1);document.addEventListener("mousemove",t),document.addEventListener("mouseup",s)}}S(t,s,h){const i=Math.round(this.I/2-this.P/2),n=Math.round(this.I/2+this.P/2);this.k=(t-i)/this.P,this.value=1-(s-i)/this.P,this.l(),h(this.color());const o=t=>{const s=Math.max(Math.min(t.offsetX,n),i),o=Math.max(Math.min(t.offsetY,n),i);return this.k=(s-i)/this.P,this.value=1-(o-i)/this.P,this.l(),h(this.color()),t.preventDefault(),!1},e=()=>(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e),!1);document.addEventListener("mousemove",o),document.addEventListener("mouseup",e)}color(){const[s,h,i]=t.s(this.p,this.k,this.value);return s<<16|h<<8|i}H(t,s,h){const i="..111...10001.10...0110...0110...01.10001...111..";let n=(h-3)*t.width*4+4*(s-3),o=0;for(h=0;h<7;h++,n+=4*t.width-28)for(s=0;s<7;s++,o++)if("."==i[o])n+=4;else{const s="1"==i[o]?0:255;t.data[n++]=s,t.data[n++]=s,t.data[n++]=s,t.data[n++]=255}}}}(ColorPicker||(ColorPicker={}));